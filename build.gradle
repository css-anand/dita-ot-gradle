plugins {
    id 'com.gradle.plugin-publish' version '0.9.1'
}

apply plugin: 'com.gradle.plugin-publish'
apply plugin: 'groovy'
apply plugin: 'maven'
apply plugin: 'codenarc'

dependencies {
    compile gradleApi()
    compile localGroovy()

    testCompile('org.spockframework:spock-core:1.0-groovy-2.4') {
        exclude group: 'org.codehaus.groovy', module: 'groovy-all'
        exclude group: 'org.hamcrest', module: 'hamcrest-core'
    }
}

repositories {
    jcenter()
}

dependencies {
    compile 'commons-io:commons-io:2.4'
}

test {
    systemProperty 'dita.home', System.getProperty('dita.home', '/opt/dita-ot')
}

group = 'com.github.eerohele'
version = '0.1.0'

task publish(dependsOn: ['codenarcMain', 'test'])

pluginBundle {
  website = 'https://github.com/eerohele/dita-ot-gradle'
  vcsUrl = 'https://github.com/eerohele/dita-ot-gradle.git'
  description = 'A Gradle plugin for running DITA Open Toolkit'
  tags = ['dita', 'dita-ot', 'documentation']

  plugins {
    DitaOtPlugin {
      id = 'com.github.eerohele.dita-ot-gradle'
      displayName = 'DITA-OT Gradle Plugin'
    }
  }
}
